<!DOCTYPE html>
<html>
<head>
<<<<<<< HEAD
    <meta charset="UTF-8">
    <title>Find Nearby Schools</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

</head>
<body>
    <div class="container">
        <h1>Find Nearby Schools</h1>
        <form method="post" id="searchForm">
            <label>Enter Postcode:</label>
            <input type="text" name="postcode" value="{{ request.form.postcode or '' }}" required>

            <label>SEN (keywords, comma separated):</label>
            <input type="text" name="sen" value="{{ request.form.sen or '' }}" placeholder="e.g. ASD, Autistic, Physical, SLD, VI">

            <label>Number of Schools:</label>
            <input type="number" name="limit" min="1" value="{{ request.form.limit or 3 }}" required>

            <label>Gender:</label>
            <select name="gender">
                <option value="">Any</option>
                <option value="Mixed" {% if request.form.gender == "Mixed" %}selected{% endif %}>Mixed</option>
                <option value="Boys" {% if request.form.gender == "Boys" %}selected{% endif %}>Boys</option>
                <option value="Girls" {% if request.form.gender == "Girls" %}selected{% endif %}>Girls</option>
            </select>

            <label>Rating:</label>
            <select name="ofsted">
                <option value="">Any</option>
                <option value="Outstanding" {% if request.form.ofsted == "Outstanding" %}selected{% endif %}>Outstanding</option>
                <option value="Good" {% if request.form.ofsted == "Good" %}selected{% endif %}>Good</option>
                <option value="Requires Improvement" {% if request.form.ofsted == "Requires Improvement" %}selected{% endif %}>Requires Improvement</option>
                <option value="Inadequate" {% if request.form.ofsted == "Inadequate" %}selected{% endif %}>Inadequate</option>
            </select>

            <label>School Type:</label>
            <select name="school_type">
                <option value="">Any</option>
                <option value="Academies" {% if request.form.school_type == "Academies" %}selected{% endif %}>Academies</option>
                <option value="Free Schools" {% if request.form.school_type == "Free Schools" %}selected{% endif %}>Free Schools</option>
                <option value="Special Schools" {% if request.form.school_type == "Special Schools" %}selected{% endif %}>Special Schools</option>
            </select>

            <label>School Level:</label>
            <select name="school_level">
                <option value="">Any</option>
                <option value="Nursery" {% if request.form.school_level == "Nursery" %}selected{% endif %}>Nursery</option>
                <option value="Primary" {% if request.form.school_level == "Primary" %}selected{% endif %}>Primary</option>
                <option value="Secondary" {% if request.form.school_level == "Secondary" %}selected{% endif %}>Secondary</option>
            </select>

            <button type="submit">Find Schools</button>
        </form>

        {% if error %}
            <div style="color:red; margin-top: 20px;">{{ error }}</div>
        {% endif %}

        {% if schools %}
        <div class="result-container" style="display: block;">
            <h2>Nearby Schools</h2>
            {% for s in schools %}
            <div class="school-item">
                <h3>{{ s['EstablishmentName'] }}</h3>
                <p><strong>Address:</strong> {{ s['Street'] }}, {{ s['Town'] }}, {{ s['Postcode'] }}</p>
                <p><strong>Phone:</strong> {{ s['TelephoneNum'] or "Not Mentioned" }}</p>
                <p><strong>Gender:</strong> {{ s['Gender'] or "Not Mentioned" }}</p>
                <p><strong>Rating:</strong> {{ s['Rating'] or "Not Mentioned" }}</p>
                <p><strong>School Type:</strong> {{ s['SchoolType'] or "Not Mentioned" }}</p>
                <p><strong>School Level:</strong> {{ s['SchoolLevel'] or "Not Mentioned" }}</p>
                <p><strong>Has Special Classes:</strong> {{ s['HasSpecialClasses'] }}</p>
                <p><strong>SEN:</strong> {{ s['AllSEN'] or "Not Mentioned" }}</p>
                <p><strong>Distance:</strong> {{ s['distance_miles'] }} miles</p>
                <a href="https://www.google.com/maps?q={{ s['Latitude'] }},{{ s['Longitude'] }}" target="_blank" class="btn btn-sm btn-outline-primary">View on Map</a>
            </div>
            {% endfor %}
        </div>

        <div class="map-container mt-4">
            {{ map_html|safe }}
        </div>
        {% endif %}
    </div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
=======
    <title>Find Nearby Schools</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f8f9fa; font-family: Arial; }
        .container { margin-top: 30px; }
        .card { padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        h2 { color: #007bff; }
        table th { background: #007bff; color: white; }
        table td { background: #fdfdfd; vertical-align: top; }
        .map-container { margin-top: 20px; }
        .sen-cell { max-width: 360px; white-space: normal; word-wrap: anywhere; }
    </style>
</head>
<body>
<div class="container">
    <div class="card">
        <h2 class="mb-4">Find Nearby Schools</h2>
        <form method="post" class="row g-3">
            <div class="col-md-4">
                <label class="form-label">Enter Postcode:</label>
                <input type="text" class="form-control" name="postcode" required>
            </div>
            <div class="col-md-8">
                <label class="form-label">SEN (keywords, comma separated):</label>
                <input type="text" class="form-control" name="sen" placeholder="e.g. ASD, Autistic, Physical, SLD, VI">
            </div>
            <div class="col-md-4">
                <label class="form-label">Number of Schools:</label>
                <input type="number" class="form-control" name="limit" min="1" value="3" required>
            </div>
            <div class="col-md-4">
                <label class="form-label">Gender:</label>
                <select name="gender" class="form-select">
                    <option value="">Any</option>
                    <option value="Mixed">Mixed</option>
                    <option value="Boys">Boys</option>
                    <option value="Girls">Girls</option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label">Rating:</label>
                <select name="ofsted" class="form-select">
                    <option value="">Any</option>
                    <option value="Outstanding">Outstanding</option>
                    <option value="Good">Good</option>
                    <option value="Requires Improvement">Requires Improvement</option>
                    <option value="Inadequate">Inadequate</option>
                </select>
            </div>
            
            <div class="col-md-12">
                <button type="submit" class="btn btn-primary btn-lg mt-3">Find Schools</button>
            </div>
        </form>
    </div>

    {% if error %}
        <div class="alert alert-danger mt-3">{{ error }}</div>
    {% endif %}

    {% if schools %}
        <div class="card mt-4">
            <h3>Closest Schools</h3>
            <table class="table table-striped mt-3">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Address</th>
                        <th>Phone</th>
                        <th>Gender</th>
                        <th>Has Special Classes</th>
                        <th>Rating</th>
                        <th class="sen-cell">SEN</th>
                        <th>Distance (miles)</th>
                        <th>Map</th>
                    </tr>
                </thead>
                <tbody>
                    {% for s in schools %}
                    <tr>
                        <td>{{ s['EstablishmentName'] }}</td>
                        <td>{{ s['Street'] }}, {{ s['Town'] }}, {{ s['Postcode'] }}</td>
                        <td>{{ s['TelephoneNum'] }}</td>
                        <td>{{ s['Gender'] }}</td>
                        <td>{{ s['HasSpecialClasses'] }}</td>
                        <td>{{ s['Rating'] }}</td>
                        <td class="sen-cell">{{ s['AllSEN'] }}</td>
                        <td>{{ s['distance_miles']|int }}</td>
                        <td><a href="https://www.google.com/maps?q={{ s['Latitude'] }},{{ s['Longitude'] }}" target="_blank" class="btn btn-sm btn-outline-primary">View</a></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="map-container mt-4">
            {{ map_html|safe }}
        </div>
    {% endif %}
</div>
>>>>>>> ce9fd51e30a515e065478ade6fa314f3117ce799
</body>
</html>
